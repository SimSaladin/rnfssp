$if null nav
  <i>Select a category
$else
  <ul.breadcrumb>
    $forall (name, url) <- init nav
      <li>
        <a.browser-link href=@{MediaR url}>#{name}
        <span.divider>/
    $with (name, url) <- last nav
      <li>
        <i>#{name}
  $if is_dir
    <div.page-element.functional>
      <table#mediaTable.browser.tablesorter>
        <thead>
          <tr>
            <td scope="col">
            <td scope="col">_{MsgMediaFilename}
            <td scope="col">_{MsgMediaSize}
            <td scope="col">_{MsgMediaModified}
        <tbody>
          $forall (file, ftype, url, size, modified) <- listing
            <tr>
              <td>
                <a href="?to_playlist=1" onclick="to_playlist('#{area}', '#{toPath $ tail url}'); return false">
                  <i.icon-plus.icon-white>
                $if not $ isdir ftype
                  <a href=@{MediaServeR "force" url} onclick="">
                    <i.icon-download-alt.icon-white>
                  <a href=@{MediaServeR "auto" url} onclick="" target="_blank">
                    <i.icon-play.icon-white>
              <td>
                <a.#{ftype} href=@{MediaR url}>
                  <tt>#{file}
              <td>
                #{size}
              <td>
                #{modified}
  $elseif is_file
    $with (name, url) <- last nav
      <div.page-element>
        <div..row-fluid>
          <div.span7>
            <h3>General
            <div>
              <i>...
            <h3>Comments
            <i>coming maybe some day
          <div.span5>
            <h3>Download
            <a.btn.btn-primary href="@{MediaServeR "auto" url}" target="_blank">
              <i.icon-white.icon-play> #
              Auto-open
            <a.btn href="@{MediaServeR "force" url}">
              <i.icon.icon-download-alt> #
              Download
        <h3>Details
        <h4>Mediainfo
        $maybe s <- details
          <pre>#{s}

  $else
    <i>Invalid request
