-- vim:foldmethod=indent:foldlevel=0:

-- Authentication
User
   username Text Eq
   email    Text Eq
   ircnick  Text Eq Maybe default='' Update
   password Text
   salt     Text
   admin    Bool default=false Update
   valid    Bool default=false Update
   currentplaylist Text Maybe
   comment  Textarea
   UniqueUser username
   deriving Typeable

-- Blog
Blogpost
   time     UTCTime
   poster   Text
   title    Text
   urlpath  Text
   tags     [Text]
   public   Bool   default=true Update
   markdown Markdown
   rendered          Html
   renderedPreview   Html
   previewSame       Bool default=true Update
   UniqueBlogpost urlpath

Blogcomment
   post     BlogpostId
   parent   BlogcommentId Maybe
   time     UTCTime
   user     UserId Maybe
   author   Text
   website  Text Maybe
   content  Textarea

-- Board
Board
   name Text
   description Text
   UniqueBoard name

Boardpost
   location BoardId
   parent BoardpostId Maybe
   time UTCTime
   poster Text Maybe
   email Text Maybe
   title Text Maybe
   content Textarea Maybe
   pass Text
   filepath String Maybe
   fileinfo Text Maybe

-- Media/Sections
Playlist
   title Text
   owner UserId
   elems [TupleText]
   created UTCTime
   modified UTCTime
   UniquePlaylist owner title

Filenode
   area Text
   parent FilenodeId Maybe
   isdir Bool
   path Text
   size Text
   modTime UTCTime
   details Text Maybe
   UniqueFilenode area path

-- Media/temp/log
LogDownload
   user UserId
   time UTCTime
   node FilePath

DlTemp
   date UTCTime
   ident Text
   target Text
   UniqueDlTemp ident

-- Other
Bettarget
   date UTCTime
   running Bool
   owner UserId
   title Text
   factors (Map Text Int)

Bet
   owner UserId
   amount Int
   target Text

SaleItem
   name     Text
   count    Int   default=1
   price    Double
   desc     Text  Maybe
   -- contact
   seller   Text
   email    Text  Maybe
   irc      Text  Maybe

BuyItem
   what     Text
   count    Int   default=1
   desc     Text Maybe
   -- contact info
   buyer    Text
   email    Text Maybe
   irc      Text Maybe

SaleMessage
   from Text
   to   Text
   msg  Text

